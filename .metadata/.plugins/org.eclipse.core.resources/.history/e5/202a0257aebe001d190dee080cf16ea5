package presentation;
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.Font;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.FocusEvent;
import java.awt.event.FocusListener;
import java.sql.SQLException;
import java.util.ArrayList;

import javax.swing.DefaultComboBoxModel;
import javax.swing.DefaultListModel;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JList;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.border.LineBorder;

import databaseDAO.superDAO;
import middleLayer.ListOfOrders;
import middleLayer.ListOfPatients;
import middleLayer.Order;
import middleLayer.Owner;
import middleLayer.Patient;
import middleLayer.Pharmacist;
import middleLayer.Report;

public class DisplayReport {
    private static final long serialVersionUID = 1L;
    private JFrame superFrame;
    private JFrame frame;
    private JPanel contentPane;
    private JTextField rev;
    private JTextField prof;
    private JTextArea salesSummary;
    private Report report = new Report();
    private double revenue;
    private double profit;
    private String summary;


    
    public void displayReport() {
        frame = new JFrame();
        contentPane = new JPanel();
        frame.setTitle("Sales Overview");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setBounds(100, 100, 1200, 700);
        frame.setContentPane(contentPane);
        contentPane.setLayout(null);

        JLabel lblHeader = new JLabel("Sales Overview");
        lblHeader.setFont(new Font("굴림", Font.BOLD, 18));
        lblHeader.setBounds(10, 10, 300, 35);
        contentPane.add(lblHeader);

        JLabel lblRevenue = new JLabel("Revenue:");
        lblRevenue.setFont(new Font("굴림", Font.BOLD, 18));
        lblRevenue.setBounds(125, 45, 350, 35);
        contentPane.add(lblRevenue);

        rev = new JTextField();
        rev.setEditable(false);
        rev.setBounds(285, 45, 150, 35);
        contentPane.add(rev);
        rev.setColumns(10);

        JLabel lblProfit = new JLabel("Profit:");
        lblProfit.setFont(new Font("굴림", Font.BOLD, 18));
        lblProfit.setBounds(125, 90, 350, 35);
        contentPane.add(lblProfit);

        prof = new JTextField();
        prof.setEditable(false);
        prof.setBounds(285, 90, 150, 35);
        contentPane.add(prof);
        prof.setColumns(10);

        JLabel lblSum = new JLabel("Sales Summary");
        lblSum.setFont(new Font("굴림", Font.BOLD, 18));
        lblSum.setBounds(10, 135, 350, 35);
        contentPane.add(lblSum);

        JScrollPane scrollPane = new JScrollPane();
        scrollPane.setBounds(10, 180, 1150, 450);
        contentPane.add(scrollPane);

        salesSummary = new JTextArea();
        salesSummary.setEditable(false);
        salesSummary.setFont(new Font("monospaced", Font.PLAIN, 12));
        scrollPane.setViewportView(salesSummary);

        JButton btnRefresh = new JButton("Refresh");
        btnRefresh.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                //display();
            }
        });
        btnRefresh.setFont(new Font("굴림", Font.BOLD, 18));
        btnRefresh.setBounds(530, 50, 150, 35);
        contentPane.add(btnRefresh);

        //display();
        frame.setVisible(true);
        try {
            this.revenue = this.report.calculateRevenue();


           this.profit =this. report.calculateProfit();


           this.summary = this.report.seeSummaryOfSales();

        } catch (Exception ex) {
            ex.printStackTrace();
        }
        this.rev.setText(String.format("$%.2f", revenue));
        this.prof.setText(String.format("$%.2f", profit));
        this.salesSummary.setText(summary);
        System.out.println(revenue + " " + profit + " " + summary);
        frame.setVisible(true);
    }

    //calls methods from Report.java
    private void display() {
        try {
            double revenue = report.calculateRevenue();
            rev.setText(String.format("$%.2f", revenue));

            double profit = report.calculateProfit();
            prof.setText(String.format("$%.2f", profit));

            String summary = report.seeSummaryOfSales();
            salesSummary.setText(summary);
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(() -> {
            try {
            	superDAO.setPassword("Motp1104#");
                DisplayReport screen = new DisplayReport();

            } catch (Exception e) {
                e.printStackTrace();
            }
        });
    }
}

